apiVersion: dapr.io/v1alpha1
kind: Component
metadata:
    name: oauth2
    namespace: default
spec:
    type: middleware.http.oauth2
    version: v1
    metadata:
        - name: clientId
          value: 'MarketPlace_Swagger'
        - name: clientSecret
          value: '1q2w3e*'
        - name: scopes
          value: 'AggregateService,InventoryService,AbpService,AccountService,MarketingService'
        - name: redirectURL
          value: 'https://localhost:44351/swagger/oauth2-redirect.html'
        - name: authURL
          value: https://localhost:44351/connect/authorize
        - name: tokenURL
          value: 'https://localhost:44351/connect/token'
        - name: headerName
          value: 'authorization'
        # - name: endpointParamsQuery
        #   value: "<list of additional key=value settings separated by ampersands or semicolons forwarded to the token issuing service>"
        # authStyle:
        # "0" means to auto-detect which authentication
        # style the provider wants by trying both ways and caching
        # the successful way for the future.

        # "1" sends the "client_id" and "client_secret"
        # in the POST body as application/x-www-form-urlencoded parameters.

        # "2" sends the client_id and client_password
        # using HTTP Basic Authorization. This is an optional style
        # described in the OAuth2 RFC 6749 section 2.3.1.
        - name: authStyle
          value: '1'
        - name: forceHTTPS
          value: 'true'
